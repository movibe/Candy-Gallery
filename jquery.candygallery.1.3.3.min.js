(function(a){a.fn.candygallery=function(b){var c={maxwidth:203,thumbwidth:50,thumbopacity:0.7,title:"true",changeon:"click",thumbposition:"after",fade:"true",fadespeed:500};var b=a.extend({},c,b);return this.each(function(){obj=a(this);var i=a(obj).children("img:first-child").attr("src");var g=parseFloat(b.thumbwidth)+50;a(obj).children("img").wrap("<li />");a(obj).children("li").wrapAll('<ul class="gallery-ul" />');var f=a(obj).children(".gallery-ul");var h=a(obj).children(".gallery-ul").children("li").children("img");var d=a(obj).children(".gallery-ul").children("li");a(h).attr("width",g);if(b.thumbposition=="after"){a(f).before('<div class="big-image"></div>')}else{a(f).after('<div class="big-image"></div>')}var k=a(obj).children(".big-image");a('<img src="'+i+'" />').appendTo(k);if(b.title=="true"){a('<div class="gallery-title"></div>').appendTo(k);var j=a(k).children(".gallery-title");var e=a(f).children("li:first-child").children("img").attr("alt");a(j).text(e)}a(k).children("img").attr("width",b.maxwidth);a(d).css({width:b.thumbwidth+"px",height:b.thumbwidth+"px",opacity:b.thumbopacity});a(f).children("li:first-child").addClass("active-thumb");a(h).bind("changeimg",function(){var m=a(this).attr("alt");var l=a(this);if(b.fade=="true"){a(k).children("img").addClass("del-me").stop(true,true);a(".del-me").css({position:"relative","z-index":"2"});a(l).clone().appendTo(k);a(".del-me").siblings("img").addClass("temp");a(".del-me").fadeOut(b.fadespeed,function(){a(this).remove();a(".temp").removeClass("temp")});a(k).children("img").attr("width",b.maxwidth)}else{a(k).children("img").remove();a(l).clone().appendTo(k);a(k).children("img").attr("width",b.maxwidth)}a(f).children(".active-thumb").removeClass("active-thumb");a(this).parent().addClass("active-thumb");a(j).text("");a(j).text(m)});if(b.changeon=="click"){a(h).click(function(){a(this).trigger("changeimg")})}else{a(h).hover(function(){a(this).trigger("changeimg")})}})}})(jQuery);