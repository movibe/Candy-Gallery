/*
*	Candy Gallery			
*
*	@author:			Stephen Radford, Twitter: @steve228uk
*	@version:			1.4
*	@Last Update:		19.01.2012
*	@licence:			MIT (http://www.opensource.org/licenses/mit-license.php)
*						GPL	(http://www.gnu.org/licenses/gpl.html)
*	@documentation:		{to come}
*	@feedback:			steve228uk@gmail.com
*
*/

(function(a){a.fn.candygallery=function(b){var c={maxwidth:203,thumbwidth:50,thumbopacity:0.7,title:"true",changeon:"click",thumbposition:"after",fade:"true",fadespeed:500,nav:"true",nexttext:"&rarr;",prevtext:"&larr;"};var b=a.extend({},c,b);return this.each(function(){var e=a(this);var f=a(e).children("img:first-child").attr("src");var k=parseFloat(b.thumbwidth)+50;a(e).children("img").wrap("<li />");a(e).children("li").wrapAll('<ul class="gallery-ul" />');var j=a(e).children(".gallery-ul");var l=a(e).children(".gallery-ul").children("li").children("img");var g=a(e).children(".gallery-ul").children("li");a(l).attr("width",k);if(b.thumbposition=="after"){a(j).before('<div class="big-image"></div>')}else{a(j).after('<div class="big-image"></div>')}var i=a(e).children(".big-image");a('<img src="'+f+'" />').appendTo(i);if(b.title=="true"){a('<div class="gallery-title"></div>').appendTo(i);var d=a(i).children(".gallery-title");var h=a(j).children("li:first-child").children("img").attr("alt");a(d).text(h)}a(i).children("img").attr("width",b.maxwidth);a(g).css({width:b.thumbwidth+"px",height:b.thumbwidth+"px",opacity:b.thumbopacity});a(j).children("li:first-child").addClass("active-thumb");a(j).children("li:last-child").attr("id","candy-last");a(j).children("li:first-child").attr("id","candy-first");if(b.nav=="true"){a('<a href="javascript:void(0);" class="candy-next" title="Next Image">'+b.nexttext+'</a><a href="javascript:void(0);" class="candy-prev" title="Previous Image">'+b.prevtext+"</a>").appendTo(i);a(i).children(".candy-next").click(function(){var o=a(j).children(".active-thumb").next("li").children("img").attr("alt");var m=a(j).children(".active-thumb").next("li").children("img");var n=a(j).children(".active-thumb").next("li").children("img").attr("src");if(a(m).parent().attr("id")=="candy-last"){a(this).hide()}a(i).children(".candy-prev").show();if(b.fade=="true"){a(i).children("img").addClass("del-me").stop(true,true);a(".del-me").css({position:"relative","z-index":"2"});a(m).clone().appendTo(i);a(".del-me").siblings("img").addClass("temp");a(".del-me").fadeOut(b.fadespeed,function(){a(this).remove();a(".temp").removeClass("temp")});a(i).children("img").attr("width",b.maxwidth)}a(j).children(".active-thumb").removeClass("active-thumb");a(m).parent().addClass("active-thumb")});a(i).children(".candy-prev").hide();a(i).children(".candy-prev").click(function(){var o=a(j).children(".active-thumb").prev("li").children("img").attr("alt");var m=a(j).children(".active-thumb").prev("li").children("img");var n=a(j).children(".active-thumb").prev("li").children("img").attr("src");if(a(m).parent().attr("id")=="candy-first"){a(this).hide()}a(i).children(".candy-next").show();if(b.fade=="true"){a(i).children("img").addClass("del-me").stop(true,true);a(".del-me").css({position:"relative","z-index":"2"});a(m).clone().appendTo(i);a(".del-me").siblings("img").addClass("temp");a(".del-me").fadeOut(b.fadespeed,function(){a(this).remove();a(".temp").removeClass("temp")});a(i).children("img").attr("width",b.maxwidth)}a(j).children(".active-thumb").removeClass("active-thumb");a(m).parent().addClass("active-thumb")})}a(l).bind("changeimg",function(){var n=a(this).attr("alt");var m=a(this);if(b.fade=="true"){a(i).children("img").addClass("del-me").stop(true,true);a(".del-me").css({position:"relative","z-index":"2"});a(m).clone().appendTo(i);a(".del-me").siblings("img").addClass("temp");a(".del-me").fadeOut(b.fadespeed,function(){a(this).remove();a(".temp").removeClass("temp")});a(i).children("img").attr("width",b.maxwidth)}else{a(i).children("img").remove();a(m).clone().appendTo(i);a(i).children("img").attr("width",b.maxwidth)}a(j).children(".active-thumb").removeClass("active-thumb");a(this).parent().addClass("active-thumb");a(d).text("");a(d).text(n);if(a(this).parent().attr("id")=="candy-last"){a(i).children(".candy-next").hide()}else{a(i).children(".candy-next").show()}if(a(this).parent().attr("id")=="candy-first"){a(i).children(".candy-prev").hide()}else{a(i).children(".candy-prev").show()}});if(b.changeon=="click"){a(l).click(function(){a(this).trigger("changeimg")})}else{a(l).hover(function(){a(this).trigger("changeimg")})}})}})(jQuery);